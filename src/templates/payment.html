<!DOCTYPE html>
<html>
<head>
    <title>Primos de Peláez FC - Support Us</title>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
    <style>
        body {
            background: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), url('/static/primosFamily.jpg');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            min-height: 100vh;
            color: white;
        }
        
        .payment-container {
            margin-top: 2rem;
            min-height: 80vh;
            display: flex;
            align-items: center;
        }

        .card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            color: #333;
        }

        .card-title {
            color: #dc3545;
            font-weight: bold;
            margin-bottom: 1.5rem;
        }

        .form-control {
            border-radius: 8px;
            padding: 12px;
            border: 1px solid #ced4da;
        }

        .form-control:focus {
            border-color: #dc3545;
            box-shadow: 0 0 0 0.25rem rgba(220, 53, 69, 0.25);
        }

        #submit {
            background-color: #dc3545;
            border: none;
            padding: 12px;
            font-weight: 600;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        #submit:hover {
            background-color: #c82333;
            transform: translateY(-2px);
        }

        #submit:disabled {
            background-color: #dc354580;
            transform: none;
        }

        .support-text {
            text-align: center;
            color: #666;
            font-size: 0.9rem;
            margin-top: 1rem;
        }

        .secure-badge {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            color: #28a745;
            font-size: 0.9rem;
            margin-bottom: 1rem;
            flex-direction: column;
        }

        .payment-methods {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 24px;
            margin-top: 15px;
            flex-wrap: wrap;
            padding: 10px 0;
        }

        .payment-methods img {
            height: 24px;
            object-fit: contain;
        }

        .payment-methods .divider {
            width: 2px;
            height: 24px;
            background-color: #dee2e6;
            margin: 0;
        }

        .payment-methods svg {
            height: 40px;
            width: auto;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
        }

        /* Stripe Elements Styling */
        #payment-element {
            padding: 12px;
            border-radius: 8px;
            background: white;
            border: 1px solid #ced4da;
            transition: all 0.2s ease;
        }

        #payment-element.focused {
            border-color: #dc3545;
            box-shadow: 0 0 0 0.25rem rgba(220, 53, 69, 0.25);
        }

        #payment-message {
            padding: 12px;
            border-radius: 8px;
            margin-top: 1rem;
            font-weight: 500;
        }

        #payment-message.error {
            background-color: #f8d7da;
            border: 1px solid #f5c2c7;
            color: #842029;
        }

        #payment-message.success {
            background-color: #d1e7dd;
            border: 1px solid #badbcc;
            color: #0f5132;
        }
    </style>
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-danger">
        <div class="container">
            <a class="navbar-brand" href="/">Primos de Peláez FC</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" href="/">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/team">Team</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/family">Family</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/revolution">Revolution</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/contacts">Contacts</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link btn btn-outline-light" href="/payment">Support Us</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="payment-container">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-body">
                            <h2 class="card-title text-center">Support Our Family</h2>
                            <div class="secure-badge">
                                <div class="d-flex align-items-center">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-shield-check" viewBox="0 0 16 16">
                                        <path d="M5.338 1.59a61.44 61.44 0 0 0-2.837.856.481.481 0 0 0-.328.39c-.554 4.157.726 7.19 2.253 9.188a10.725 10.725 0 0 0 2.287 2.233c.346.244.652.42.893.533.12.057.218.095.293.118a.55.55 0 0 0 .101.025.615.615 0 0 0 .1-.025c.076-.023.174-.061.294-.118.24-.113.547-.29.893-.533a10.726 10.726 0 0 0 2.287-2.233c1.527-1.997 2.807-5.031 2.253-9.188a.48.48 0 0 0-.328-.39c-.651-.213-1.75-.56-2.837-.855C9.552 1.29 8.531 1.067 8 1.067c-.53 0-1.552.223-2.662.524zM5.072.56C6.157.265 7.31 0 8 0s1.843.265 2.928.56c1.11.3 2.229.655 2.887.87a1.54 1.54 0 0 1 1.044 1.262c.596 4.477-.787 7.795-2.465 9.99a11.775 11.775 0 0 1-2.517 2.453 7.159 7.159 0 0 1-1.048.625c-.28.132-.581.24-.829.24s-.548-.108-.829-.24a7.158 7.158 0 0 1-1.048-.625 11.777 11.777 0 0 1-2.517-2.453C1.928 10.487.545 7.169 1.141 2.692A1.54 1.54 0 0 1 2.185 1.43 62.456 62.456 0 0 1 5.072.56z"/>
                                        <path d="M10.854 5.146a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L7.5 7.793l2.646-2.647a.5.5 0 0 1 .708 0z"/>
                                    </svg>
                                    <span class="ms-2">Secure Payment via Stripe</span>
                                </div>
                                <div class="payment-methods">
                                    <!-- Apple Pay -->
                                    <svg width="40" height="17" viewBox="0 0 40 17" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M7.41463 2.95396C7.85923 2.43086 8.15513 1.71558 8.08883 1C7.46154 1.02148 6.70505 1.39892 6.24675 1.922C5.83295 2.37616 5.47761 3.11301 5.55761 3.80673C6.25923 3.86109 6.95633 3.46337 7.41463 2.95396Z" fill="black"/>
                                        <path d="M8.06687 3.95306C7.04107 3.89161 6.17257 4.53799 5.69257 4.53799C5.19887 4.53799 4.45607 3.98341 3.61927 3.99781C2.53117 4.01221 1.51907 4.63702 0.959068 5.63068C-0.180932 7.61799 0.684268 10.5732 1.78967 12.1824C2.32807 12.9721 2.96907 13.8397 3.82957 13.8181C4.65267 13.7893 4.98607 13.2996 5.98447 13.2996C6.96917 13.2996 7.27877 13.8181 8.14647 13.8037C9.04787 13.7893 9.60367 13.0068 10.1421 12.2171C10.7615 11.3063 11.0211 10.4243 11.0355 10.3811C11.0211 10.3667 9.33807 9.70881 9.32437 7.73561C9.31067 6.08001 10.6579 5.29033 10.7147 5.24906C9.93117 4.10314 8.71257 3.98341 8.06687 3.95306Z" fill="black"/>
                                        <path d="M17.0625 13.6825H15.1868L14.2854 10.8407H10.9326L10.0669 13.6825H8.25244L11.5339 3.70911H13.7557L17.0625 13.6825ZM13.9843 9.5742L12.9441 6.5701C12.8726 6.35345 12.7297 5.73595 12.5153 4.71762H12.4796C12.4081 5.09512 12.2723 5.71262 12.0722 6.5701L11.0463 9.5742H13.9843Z" fill="black"/>
                                        <path d="M25.0793 8.69678C25.0793 10.2395 24.6661 11.4754 23.8397 12.4046C23.1061 13.2395 22.2404 13.657 21.2431 13.657C20.1629 13.657 19.3937 13.2181 18.9376 12.3403H18.9019V16.5117H17.1947V7.82262C17.1947 7.02262 17.1732 6.19845 17.1375 5.35262H18.6661L18.7376 6.51262H18.7733C19.3365 5.63845 20.2165 5.20178 21.4132 5.20178C22.3747 5.20178 23.1868 5.61262 23.8397 6.44262C24.6661 7.27262 25.0793 8.37262 25.0793 8.69678ZM23.3293 8.76262C23.3293 7.89845 23.0935 7.17262 22.629 6.58595C22.1147 5.97762 21.4489 5.67262 20.6511 5.67262C20.1093 5.67262 19.6104 5.86262 19.1543 6.23095C18.6982 6.60845 18.4053 7.08595 18.2767 7.66345C18.2052 7.89845 18.1695 8.09762 18.1695 8.26678V9.42178C18.1695 10.0926 18.3839 10.657 18.8043 11.1346C19.2247 11.6121 19.7737 11.8509 20.4511 11.8509C21.2847 11.8509 21.9504 11.5459 22.4647 10.9376C22.9793 10.3292 23.3293 9.60345 23.3293 8.76262Z" fill="black"/>
                                        <path d="M33.0669 8.69678C33.0669 10.2395 32.6537 11.4754 31.8273 12.4046C31.0937 13.2395 30.228 13.657 29.2307 13.657C28.1505 13.657 27.3813 13.2181 26.9252 12.3403H26.8895V16.5117H25.1823V7.82262C25.1823 7.02262 25.1609 6.19845 25.1252 5.35262H26.6537L26.7252 6.51262H26.7609C27.3241 5.63845 28.2041 5.20178 29.4009 5.20178C30.3623 5.20178 31.1744 5.61262 31.8273 6.44262C32.6537 7.27262 33.0669 8.37262 33.0669 8.69678ZM31.3169 8.76262C31.3169 7.89845 31.0811 7.17262 30.6166 6.58595C30.1023 5.97762 29.4366 5.67262 28.6387 5.67262C28.0969 5.67262 27.598 5.86262 27.1419 6.23095C26.6858 6.60845 26.3929 7.08595 26.2644 7.66345C26.1929 7.89845 26.1572 8.09762 26.1572 8.26678V9.42178C26.1572 10.0926 26.3715 10.657 26.7919 11.1346C27.2123 11.6121 27.7613 11.8509 28.4387 11.8509C29.2723 11.8509 29.938 11.5459 30.4523 10.9376C30.9669 10.3292 31.3169 9.60345 31.3169 8.76262Z" fill="black"/>
                                        <path d="M40 10.0926C40 11.2181 39.6225 12.1259 38.8676 12.8161C38.0413 13.5492 36.9254 13.9151 35.5199 13.9151C34.2161 13.9151 33.1645 13.6967 32.3739 13.2609L32.7872 11.7181C33.6492 12.1539 34.6037 12.3723 35.6482 12.3723C36.4746 12.3723 37.1188 12.1967 37.5821 11.8509C38.0413 11.4967 38.2699 11.0323 38.2699 10.4454C38.2699 9.92262 38.0842 9.48595 37.7199 9.13928C37.3557 8.79262 36.7496 8.47262 35.9018 8.17678C33.5421 7.32678 32.3596 6.11262 32.3596 4.53845C32.3596 3.45595 32.7514 2.57262 33.5421 1.88845C34.3257 1.20428 35.3945 0.861115 36.7353 0.861115C37.8513 0.861115 38.7848 1.03762 39.5326 1.38428L39.0895 2.89845C38.3774 2.55178 37.5821 2.37345 36.6951 2.37345C35.9115 2.37345 35.2887 2.55178 34.8397 2.90762C34.4397 3.22762 34.2447 3.61428 34.2447 4.08262C34.2447 4.58262 34.4539 4.99345 34.8754 5.31262C35.2254 5.61762 35.8672 5.94595 36.8007 6.29262C37.9167 6.71262 38.7419 7.21262 39.2708 7.79012C39.7564 8.36762 40 9.13928 40 10.0926Z" fill="black"/>
                                    </svg>
                                    
                                    <div class="divider"></div>
                                    
                                    <!-- Primos Logo -->
                                    <svg width="40" height="48" viewBox="0 0 100 120" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <!-- Outer decorative frame -->
                                        <path d="M50 10 C25 10 10 25 10 50 V90 C10 105 50 115 50 115 C50 115 90 105 90 90 V50 C90 25 75 10 50 10" fill="white" stroke="#dc3545" stroke-width="2"/>
                                        
                                        <!-- Top Banner -->
                                        <path d="M15 12 Q50 5 85 12" fill="#dc3545"/>
                                        <text x="50" y="11" text-anchor="middle" font-family="Arial" font-size="8" fill="#FFD700">PRIMOS DE PELÁEZ</text>
                                        
                                        <!-- Inner Shield -->
                                        <path d="M50 20 L75 30 V70 C75 80 50 90 50 90 C50 90 25 80 25 70 V30 Z" fill="#dc3545"/>
                                        
                                        <!-- Golden Eagle -->
                                        <path d="M50 40 L65 50 L50 75 L35 50 L50 40" fill="#FFD700"/>
                                        <path d="M35 55 L65 55" stroke="#FFD700" stroke-width="3"/>
                                        <path d="M40 60 L60 60" stroke="#FFD700" stroke-width="2"/>
                                        <path d="M50 45 L55 50 L50 55" fill="none" stroke="#FFD700" stroke-width="1.5"/>
                                        
                                        <!-- Decorative Elements -->
                                        <path d="M20 30 Q50 25 80 30" fill="none" stroke="#FFD700" stroke-width="1"/>
                                        <path d="M20 80 Q50 85 80 80" fill="none" stroke="#FFD700" stroke-width="1"/>
                                        
                                        <!-- Bottom Banner -->
                                        <path d="M15 108 Q50 115 85 108" fill="#dc3545"/>
                                        <text x="50" y="111" text-anchor="middle" font-family="Arial" font-size="8" fill="#FFD700">FOOTBALL CLUB</text>
                                    </svg>
                                </div>
                            </div>
                            <form id="payment-form">
                                <div class="mb-4">
                                    <label for="amount" class="form-label">Contribution Amount (USD)</label>
                                    <input type="number" class="form-control" id="amount" value="10" min="1" step="0.01">
                                </div>
                                <div class="mb-4">
                                    <label for="email" class="form-label">Email (for receipt)</label>
                                    <input type="email" class="form-control" id="email" required>
                                </div>
                                <div id="payment-element" class="mb-4">
                                    <!-- Stripe Elements will be inserted here -->
                                </div>
                                <button id="submit" class="btn btn-primary w-100">
                                    <span id="button-text">Support Now</span>
                                    <span id="spinner" class="spinner-border spinner-border-sm d-none" role="status"></span>
                                </button>
                                <div id="payment-message" class="mt-3 text-center d-none"></div>
                                <p class="support-text mt-3">
                                    Your contribution helps us maintain and grow our soccer family. Thank you for your support! 🙏⚽
                                </p>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS and Stripe -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://js.stripe.com/v3/"></script>
    <script>
        const stripe = Stripe('{{ stripe_public_key }}');
        let elements;
        let paymentElement;

        const appearance = {
            theme: 'stripe',
            variables: {
                colorPrimary: '#dc3545',
                colorBackground: '#ffffff',
                colorText: '#333333',
                colorDanger: '#dc3545',
                fontFamily: '-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial',
                spacingUnit: '4px',
                borderRadius: '8px',
            },
            rules: {
                '.Input': {
                    border: '1px solid #ced4da',
                    boxShadow: 'none',
                    fontSize: '16px'
                },
                '.Input:focus': {
                    border: '1px solid #dc3545',
                    boxShadow: '0 0 0 0.25rem rgba(220, 53, 69, 0.25)'
                }
            }
        };

        // Initialize Stripe Elements
        const initializeStripe = async () => {
            elements = stripe.elements({ 
                appearance,
                mode: 'payment',
                currency: 'usd',
                amount: document.getElementById('amount').value * 100
            });
            
            paymentElement = elements.create('payment');
            paymentElement.mount('#payment-element');

            // Add focus styling
            paymentElement.on('focus', function() {
                document.getElementById('payment-element').classList.add('focused');
            });
            
            paymentElement.on('blur', function() {
                document.getElementById('payment-element').classList.remove('focused');
            });
        };

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', initializeStripe);

        // Handle amount changes
        document.getElementById('amount').addEventListener('change', initializeStripe);

        const form = document.getElementById('payment-form');
        const submitButton = document.getElementById('submit');
        const spinner = document.getElementById('spinner');
        const buttonText = document.getElementById('button-text');
        const paymentMessage = document.getElementById('payment-message');

        form.addEventListener('submit', async (e) => {
            e.preventDefault();
            setLoading(true);

            try {
                // Create a PaymentIntent
                const response = await fetch('/create-payment-intent', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        amount: document.getElementById('amount').value * 100,
                        email: document.getElementById('email').value
                    })
                });
                const { clientSecret } = await response.json();

                // Confirm the payment
                const { error } = await stripe.confirmPayment({
                    elements,
                    clientSecret,
                    confirmParams: {
                        return_url: `${window.location.origin}/payment-success`,
                        receipt_email: document.getElementById('email').value,
                    },
                });

                if (error) {
                    throw error;
                }
            } catch (error) {
                paymentMessage.textContent = error.message;
                paymentMessage.classList.remove('d-none');
                paymentMessage.classList.add('error');
                setLoading(false);
            }
        });

        function setLoading(isLoading) {
            submitButton.disabled = isLoading;
            spinner.classList.toggle('d-none', !isLoading);
            buttonText.classList.toggle('d-none', isLoading);
        }
    </script>
</body>
</html> 